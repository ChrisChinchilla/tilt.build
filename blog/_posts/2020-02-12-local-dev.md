---
slug: local-dev
date: 2020-02-11
author: dan
layout: blog
title: "Non-Kubernetes Local Dev"
subtitle: "Using Tilt to replace your start.sh"
image: /assets/images/local-dev/uncontained.webp
image_caption: "The goose from Untitled Goose Game feeling the freedom of not being in a container anymore."
tags:
  - tilt
  - local
keywords:
  - tilt
  - local
---

Many teams that use Kubernetes for production don't use Kubernetes in development to avoid Kubernetes pain points (like the slow inner-loops of building container images). But these teams still feel the pains of multi-service development:
* Updating the right subset of microservices after you edit files is manual/error-prone/ad hoc even if you're just running bare processes on your laptop.
* Finding a problem across many services? Playing 20 questions is as clumsy with `tail -f` or `ps` as `kubectl`.
* Onboarding new users to this clusterf...un? You want them to be productive on day 1 without having to learn the whole stack, regardless of where it's running.

Now you can use Tilt to solve these pains of multi-service development even if you aren't using Kubernetes for local development. Tilt can improve workflows built atop `foreman`, `docker-compose`, `edward`, a custom `start.sh, or a wiki page with tmux instructions.

Expanding to support non-Kubernetes development environments gets us closer to our promise: if you use Kubernetes in Prod, you need Tilt for Dev.

## What You Get

After writing a Tiltfile, you'll have a better local development experience:
* Start your whole app just by running `tilt up`
* Update microservices automatically as you edit
* Web UI that lets you see problems across services and zoom in on issues
* Easily run workflows like resetting database state

<< IMAGE TK >>

From this UI, you can see:
* The list of servers and workflows ("Resources") in the sidebar on the right
* All logs, multiplexed together
* The status of each Resource (e.g. if a server died, its status will be red instead of green)
* Logs for just one resource, by clicking on it in the sidebar

## local_resource with serve_cmd
Let's look at a sample Tiltfile for a project that uses Tilt for a wide range of cases:
* a server in a compiled language that requires a build on each change
* a server in an interpreted language that watches files and updates itself
* a code generation step that updates a source file that kicks off other updates

```python
[abc123 example Tiltfile and link]
```

This example project has clean separation between services. Tilt can handle more complex setups using options to `local_resource` that you can learn about in the API reference[link TK].

## Ensuring consistency with `local_resource`
If you're not using containers for development, you can lose some the consistency benefit of building a Dockerfile. Adding a local_resource that checks local software installations can highlight incompatibilities before you spend hours debugging a build failure. Write a script called `check_compat.sh` that does the checks and add this to your Tiltfile:
```python
local_resource('check_compat', 'check_compat.sh')
```

Tilt will run this on startup and display an error if it exits with an error.

## Try Tilt With Your Project
Download Tilt and start it. When you add to the Tiltfile, Tilt will automatically pick up the changes. If you want to pair program with a member of the Tilt team to configure Tilt for your local dev, https://calendly.com/dbentley . <More contact info>

## Where You Can Go Next
If you deploy to Kubernetes for production, you have bugs that only show up in Kubernetes. That kind of development, like modifying YAML configuration or fixing networking-specific bugs requires a Kubernetes development workflow. Your team has this workflow as well, but it's probably less understood and much slower.

Fixing those pains is Tilt's sweet spot. Live Update can sync and build into running containers as quickly as running processes locally. Tilt's UI natively displays Kubernetes events and statuses.

Using Tilt for both of these workflows is easy: devs can switch a command-line flag and the same UI that was displaying status of uncontained processes on your laptop is suddenly connected to pods in a dev Kubernetes cluster..

## Conclusion
Moving your non-Kubernetes local dev workflow into Tilt can free your team from maintaining custom tooling, manually updating microservices or hunting for error messages in logs. You can see Tilt in action on your project quickly by writing a Titlfile based on your existing setup. Your team can have a more consistent dev experience this sprint, on a foundation that you can improve over time.
